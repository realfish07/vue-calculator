import{r as a,w as x,o as l,c,a as p,n as h,t as d,F as v,b as g,d as m,e as E}from"./vendor.b65d6515.js";const w=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}};w();var k=(e,t)=>{for(const[i,r]of t)e[i]=r;return e};const u=/\d(\.\d+)?[Ee][+-]\d+/g,y={name:"App",setup(){const e=a(""),t=a(!1),i=a(null),r=a(null);return x(e,async()=>{const s=i.value;await m(),s&&s.scrollWidth>s.clientWidth&&(s.scrollLeft=s.scrollWidth-s.clientWidth)}),x(t,async()=>{const s=r.value;await m(),s&&s.scrollWidth>s.clientWidth&&(s.scrollLeft=s.scrollWidth-s.clientWidth)}),{expression:e,showResult:t,refResult:i,refExpression:r}},data:()=>({btnList:["AC","\xB1","%","\xF7","(",")","backspace","\xD7","7","8","9","-","4","5","6","+","1","2","3","=","0","."],prevExpression:"",operand:"",operator:"",result:0,showAnimation:!1,isDarkTheme:!1}),mounted(){window.addEventListener("keydown",this.detectInput)},beforeUnmount(){window.removeEventListener("keydown",this.detectInput)},methods:{removePressAnimation(e){!e.target.classList.contains("animate")||e.target.classList.remove("animate")},detectInput(e){const t=e.key.toLowerCase();if(this.btnList.includes(t)){this.pressBtn(t);return}switch(t){case"*":this.pressBtn("\xD7");break;case"/":this.pressBtn("\xF7");break;case"enter":this.pressBtn("=");break;case"escape":this.pressBtn("AC");break}},pressBtn(e){if(this.$refs[e]){for(const i of this.btnList)this.$refs[i]&&this.$refs[i].classList.remove("animate");this.$refs[e].classList.add("animate")}const t=this.showResult;if(this.showResult){if(e==="="){this.animate();return}this.result.toString()&&isFinite(this.result)?this.expression=this.result.toString():this.expression="",this.prevExpression=this.operand=this.operator="",this.result=0,this.showResult=!1}if(e==="AC"){this.prevExpression=this.operand=this.operator=this.expression="",this.result=0;return}if(e==="\xB1"){t&&(this.operand=this.expression),this.negate();return}if(e==="%"){if(t&&(this.operand=this.expression),!this.operand)return;this.operand=`${this.precise(+this.operand*.01)}`,this.expression=this.prevExpression+this.operand;return}if(e==="backspace"){if(!this.expression)return;this.backspace();return}if(e==="="){if(this.expression||(this.expression="0"),this.expression&&this.expression.match(/\(/g)){const i=this.expression.match(/\(/g).length,r=this.expression.match(/\)/g)&&this.expression.match(/\)/g).length;for(let s=0;s<i-r;s++)this.expression+=")"}this.result=this.compute(this.splitTokens()),!this.result&&this.result!==0&&(this.result="Error"),this.showResult=!0,this.animate();return}/\d|\./.test(e)?this.appendOperand(e):/\(|\)/.test(e)?this.appendParentheses(e):this.appendOperator(e)},animate(){this.showAnimation=!0,setTimeout(()=>{this.showAnimation=!1},0)},negate(){if(this.operator==="+"||this.operator==="-")this.operator=this.operator==="+"?"-":"+",this.operand&&(this.prevExpression=this.prevExpression.slice(0,-1)+this.operator);else{if(!(+this.operand||/^(-0|0)$/.test(this.operand)))return;this.operand=`${-this.operand}`}this.expression=this.prevExpression+(this.operand?this.operand:this.operator)},backspace(){let e,t,i;for(;(e=u.exec(this.expression))!==null;)t=e[0],i=u.lastIndex;i===this.expression.length?(this.operand="",this.expression=this.expression.slice(0,0-t.length)):(this.operand=this.operand.slice(0,-1),this.expression=this.expression.slice(0,-1)),/\(|\)/.test(this.expression.slice(-1))?this.prevExpression=this.expression:/[^\d\.]/.test(this.expression.slice(-1))?this.prevExpression=this.expression.slice(0,-1):(i===this.expression.length?this.operand=t:this.operand=this.expression.split(/[^\d\.]/g).filter(r=>r).slice(-1)[0]||"",this.prevExpression=this.expression.slice(0,this.operand?0-this.operand.length:0),this.prevExpression.slice(-1)==="-"&&/[^\d\.]/.test(this.prevExpression.slice(-2,-1))&&(this.operand=`-${this.operand}`,this.prevExpression=this.prevExpression.slice(0,-1))),this.operator=this.operand?this.prevExpression.slice(-1):this.expression.slice(-1),/\(|\)/.test(this.operator)&&(this.operator="")},appendParentheses(e){if(e===")"){if(this.expression&&this.expression.match(/\(/g)){const t=this.expression.match(/\(/g).length,i=this.expression.match(/\)/g)&&this.expression.match(/\)/g).length;t>i&&(this.expression=this.expression+e)}}else/\d|\)/.test(this.expression.slice(-1))&&(this.expression+="\xD7"),this.expression=this.expression+e;this.prevExpression=this.expression,this.operand=this.operator=""},appendOperand(e){if(u.test(this.operand)&&(this.operand=""),/\d|\)/.test(this.prevExpression.slice(-1))&&(this.prevExpression=this.expression),this.prevExpression.slice(-1)===")"&&(this.prevExpression+="\xD7"),/\d/.test(e))this.operand=`${+this.operand||/\.|^-$/.test(this.operand)?this.operand:this.operand==="-0"?"-":""}${e}`;else{if(/\./.test(this.operand))return;this.operand=`${/^(-|-0)$/.test(this.operand)?"-0":+this.operand}${e}`}this.expression=this.prevExpression+this.operand},appendOperator(e){this.expression||(this.prevExpression="0"),(!this.prevExpression||/[^\d\.\)]/.test(this.prevExpression.slice(-1)))&&(!this.operand&&!this.prevExpression?this.prevExpression=this.expression:Number.isNaN(+this.operand)?this.prevExpression=this.prevExpression.slice(0,-1):this.prevExpression=this.prevExpression+`${+this.operand}`),this.operand="",this.operator=e,this.expression=this.prevExpression+this.operator},splitTokens(){const e=[],t=/(\d(\.\d+)?[Ee][+-]\d+)|(([1-9]+\d*)|0)(\.\d+)?|\(|\)/g;let i,r=0,s=-1;for(;(i=t.exec(this.expression))!==null;)s!==-1&&(e.push(this.expression.slice(s,r)),s=-1),(!(i.index-1)||/[^\d]/.test(this.expression[i.index-2]))&&this.expression[i.index-1]==="-"?s=i.index-1:(r!==i.index&&e.push(this.expression.slice(r,i.index)),e.push(this.expression.slice(i.index,t.lastIndex))),s!==-1&&r!==s&&e.push(this.expression.slice(r,s)),r=t.lastIndex;const n=this.expression.slice(s!==-1?s:r);return n&&e.push(n),t.test(e[e.length-1])||e.pop(),e},compute(e){if(e.length===1)return+e[0];const t=(s,n)=>!(/\(|\)/.test(n)||/\÷|\×/.test(s)&&/\+|\-/.test(n)),i=[],r=[];for(const s of e){if(/[\d]/.test(s)){i.push(+s);continue}if(s==="("){r.push(s);continue}if(s===")"){for(;r[r.length-1]!=="(";)i.push(this.applyOp(r.pop(),i.pop(),i.pop()));r.pop();continue}for(;r.length>0&&t(s,r[r.length-1]);)i.push(this.applyOp(r.pop(),i.pop(),i.pop()));r.push(s)}for(;r.length>0;)i.push(this.applyOp(r.pop(),i.pop(),i.pop()));return i.pop()},applyOp(e,t,i){switch(i=+i,t=+t,e){case"+":return this.precise(i+t);case"-":return this.precise(i-t);case"\xD7":return this.precise(i*t);case"\xF7":return this.precise(i/t)}return 0},precise(e){const t=+e.toPrecision(8);return`${t}`.length>=8?t.toExponential():t}}},L={class:"calculator"},A={class:"switch-wrap"},$={class:"input"},O=["onPointerdown"],T={class:"btn-content"};function P(e,t,i,r,s,n){return l(),c("div",{class:h(["app-container",{"dark-theme":e.isDarkTheme,"light-theme":!e.isDarkTheme}])},[p("div",L,[p("div",A,[p("div",{class:h(["switch",{active:e.isDarkTheme,inactive:!e.isDarkTheme}]),onClick:t[0]||(t[0]=o=>e.isDarkTheme=!e.isDarkTheme)},null,2)]),p("div",$,[p("div",{ref:"refExpression",class:h(["expression",{animate:e.showAnimation}])},[p("span",null,d(r.showResult?r.expression:""),1)],2),p("div",{ref:"refResult",class:h(["result",{animate:e.showAnimation}])},[p("span",null,d(r.showResult||!r.expression?e.result:r.expression),1)],2)]),(l(!0),c(v,null,g(e.btnList,o=>(l(),c("div",{key:o,ref:o,class:h([{backspace:o==="backspace",operator:/\+|\-|\×|\÷|\=/.test(o),equal:o==="=",zero:o==="0",symbol:/[^+\-×÷=\d\.]/.test(o)},"btn"]),onPointerdown:f=>n.pressBtn(o),onTransitionend:t[1]||(t[1]=(...f)=>n.removePressAnimation&&n.removePressAnimation(...f))},[p("div",T,d(o==="backspace"?"":o),1)],42,O))),128))])],2)}var _=k(y,[["render",P]]);E(_).mount("#app");
